## [나머지 합 구하기](https://www.acmicpc.net/problem/10986)
**문제설명**  
수 $N$개 $A_1, A_2, ..., A_N$이 주어진다.  
이때, 연속된 부분 구간의 합이 $M$으로 나누어 떨어지는 구간의 개수를 구하는 프로그램을 작성하시오.  
즉, $A_i + ... + A_j\\ (i ≤ j)$의 합이 $M$으로 나누어 떨어지는 $(i, j)$ 쌍의 개수를 구해야 한다.

**제한사항**  
- 변수 조건   
$1 ≤ N ≤ 10^6$, $2 ≤ M ≤ 10^3$, $0 ≤ A_i ≤ 109$    
- 시간 제한 : 1초

**입력**  
- 첫째 줄에 N과 M이 주어진다.  
- 둘째 줄에 N개의 수 A1, A2, ..., AN이 주어진다.

**출력**  
첫째 줄에 연속된 부분 구간의 합이 M으로 나누어 떨어지는 구간의 개수를 출력한다.

<code style="background-color:#4D5357;">문제풀이</code>  

**시간 복잡도**  
주어진 수 중 임의의 구간 $(i, j)$를 선택하여 그 수가 $M$으로 나누어 떨어지는지 확인하는 경우의 수는 다음과 같다.
$$O(N^2+N) ≈ O(N^2) ≈ (10^6)^2 = 1000,000,000,000 = 1조 > 1초$$
시간 제한을 넘기므로 따라서 구간 합을 이용하여 문제를 풀어야 한다.

**문제 분석**  
1. 합 배열 정의  
$S[i]$ = 초기 배열의 $0$부터 $i$ 구간 내 수의 합
2. 구간 합 정의  
$S[i]-S[j]$는 초기 배열의 $j+1$부터 $i$ 구간 내 수의 합
3. 나머지 연산의 분배법칙  
- $(A-B)\,\%\,C\,=\,((A\,\%\,C)-(B\,\%\,C)+C)\,\%\,C$  
특정 구간$(j, i)$의 합($S_i-S_j$)에 대한 나머지는 양 끝점의 나머지를 뺀 값  $((S_i\,\%\,M)-(S_j\,\%\,M))$의 나머지와 동일하다. 만약 $S_i$의 나머지 값과 $S_j$의 나머지 값이 동일하다면 해당 구간의 합은 $M$으로 나누어 떨어진다.
4. 연속된 부분 구간의 합이 M으로 나누어 떨어지는 구간의 개수 카운팅
- $0$부터 $i$까지의 구간 합을 $M$으로 나눈 나머지가 0인 경우 카운팅  
- 임의의 구간 합 $S_i$를 $M$으로 나눈 나머지가 동일한 경우 카운팅
- 나머지 값이 동일한 합 배열의 원소 중 2개를 뽑는 경우의 수를 카운팅.  
즉, M으로 나누어 떨어지는 $(S_i\%M) - (S_j\%M) = 0$인 구간 $(i, j)$의 수를 계산

**구현 코드**  

```java
import java.util.Scanner;

public class SumOfRemainder {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int N = sc.nextInt();
        int M = sc.nextInt();
        long[] S = new long[N + 1];
        long[] R = new long[M];
        long answer = 0;

        // 수열의 합 배열 만들기
        for (int i = 1; i <= N; i++) {
            S[i] = S[i - 1] + sc.nextInt();
        }

        // 합 배열의 모든 값에 나머지 연산 수행
        for (int i = 1; i <= N; i++) {  
            int remainder = (int) (S[i] % M);
            // 0 ~ i까지의 구간 합이 0인 경우 카운팅
            if (remainder == 0) answer++;
            // 나머지가 같은 인덱스의 개수 저장
            R[remainder]++;
        }

        for (long i : R) {
            if (i > 1) {
                // 나머지가 같은 인덱스 중 2개를 뽑는 경우의 수 카운팅
                answer += (i * (i - 1)) / 2;
            }
        }
        System.out.println(answer);
    }
}
```

# 참고 문헌
- 김종관. 『Do it! 알고리즘 코딩 테스트: 자바 편』, 이지스퍼블리싱(2022), p52-55